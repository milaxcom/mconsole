var LinksEditor=function(i){self=this,self.input=i,self.links=i.val().length>0?JSON.parse(i.val()):[],self.init()};LinksEditor.prototype.factory={},LinksEditor.prototype.generateItem=function(i){var i=self.factory.linkItem(i);return self.factory.linkItemDOM(i)},LinksEditor.prototype.init=function(){var i=$('<div class="links-editor-items"></div>'),e=$('<div class="form-group"><div class="btn btn-sm blue form-control">+</div></div>');e.on("click",function(){i.append(self.generateItem())});for(var n in self.links)i.append(self.generateItem(self.links[n]));e.insertAfter(self.input),i.insertAfter(self.input),i.sortable({axis:"y",handle:".drag",stop:self.handleLinksChange}),self.container=i},LinksEditor.prototype.handleLinksChange=function(){$(this).hasClass("remove")&&$(this).closest(".links-editor-item").remove();var i=$(self.container).find(".links-editor-item"),e=[];i.length>0&&i.map(function(i,n){var t={id:$(n).data("id"),title:$(n).find("input").eq(0).val(),url:$(n).find("input").eq(1).val(),order:i,enabled:$(n).find('input[type="checkbox"]:checked').length>0};t.title&&t.url&&e.push(t)}),self.input.val(JSON.stringify(e))},LinksEditor.prototype.factory.linkItem=function(i){return i?i:{id:"",title:"",url:"",order:"",enabled:1}},LinksEditor.prototype.factory.linkItemDOM=function(i){var e=$('input[name="hidden-input-title"]').val(),n=$('input[name="hidden-input-url"]').val(),t=$('input[name="hidden-input-enabled"]').val(),l=$('<div class="ui-state-default links-editor-item" data-id="'+i.id+'">		<input class="form-control input-sm" placeholder="'+e+'" type="text" value="'+i.title+'">		<div class="input-icon input-icon-sm"><i class="fa fa-link"></i><input class="form-control input-sm" placeholder="'+n+'" type="text" value="'+i.url+'"></div>		<div class="btn btn-xs blue drag"><i class="fa fa-bars"></i></div>		<div class="btn btn-xs btn-danger remove"><i class="fa fa-trash"></i></div>		<label class="checkbox-inline"><input type="checkbox" value="1"> '+t+" </label>	</div>");return 1==i.enabled&&l.find('input[type="checkbox"]').prop("checked","checked"),l.find("input").on("keyup click",self.handleLinksChange),l.find(".remove").on("click",self.handleLinksChange),l},$.fn.loadLinksEditor=function(){new LinksEditor(this)},$(document).ready(function(){var i=".links-editor";$(i).length>0&&$(i).map(function(){$(this).loadLinksEditor()})});