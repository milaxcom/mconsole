var Module=function(l){this.module=l,this.depends={installed:$(this.module).find('input[name="installed[]"]').map(function(l,a){return $(a).val()}),available:$(this.module).find('input[name="available[]"]').map(function(l,a){return $(a).val()}),notavailable:$(this.module).find('input[name="notavailable[]"]').map(function(l,a){return $(a).val()})},$(this.module).find(".uninstall-module, .extendable").removeClass("disabled"),0==this.depends.notavailable.length?$(this.module).find(".install-module").removeClass("disabled"):$(this.module).find(".install-module").attr("data-content",trans("unabletoinstall")),$(this.module).on("click",".show-module-info",this.toggleInfo.bind(this)),$(this.module).on("click",".install-module, .uninstall-module, .extend-module",this.toggleModuleInstallation.bind(this))};Module.prototype.toggleInfo=function(){var l=$(this.module).find(".module-info");l.hasClass("hide")?l.removeClass("hide"):l.addClass("hide")},Module.prototype.toggleModuleInstallation=function(l){function a(){s&&(s.modal("hide"),setTimeout(1e3,s.remove)),i.addClass("disabled"),e.addClass("disabled").html('<i class="fa fa-spin fa-spinner"></i> '+d),$.get("/mconsole/modules/"+t+"/"+n,function(l){return location.reload()})}var t=$(this.module).data("identifier");if($(l.target).hasClass("fa"))var e=$(l.target).parent();else var e=$(l.target);if(e.hasClass("install-module"))var n="install";else if(e.hasClass("uninstall-module"))var n="uninstall";else var n="extend";var i=$(".extend-module, .uninstall-module, .install-module"),d=e.data("lang-process");if(e.hasClass("disabled"))return!1;if("uninstall"==n){var s=this.uninstallDialog(e.data("modal-title"),e.data("modal-content"),e.data("modal-cancel"),e.data("modal-uninstall"));$("body").append(s),s.modal({show:!0}),s.on("click",".uninstall-confirm",a.bind(this))}else a()},Module.prototype.uninstallDialog=function(l,a,t,e){return $('<div class="modal fade" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">'+l+'</h4></div><div class="modal-body"><p>'+a+'</p></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+t+'</button><button type="button" class="btn btn-danger uninstall-confirm">'+e+"</button></div></div></div></div>")},$(function(){var l=$("#modules-table tbody tr");l.each(function(l,a){new Module(a)})});