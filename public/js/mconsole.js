var Mconsole=function(){this.notifications={badge:$(".notifications-count"),container:$(".notifications-container"),items:0};var i=this;i.getNotifications(),setInterval(function(){i.getNotifications()},1e4)};Mconsole.prototype.getNotifications=function(){$.get("/mconsole/api/notifications",this.handleNotifications.bind(this))},Mconsole.prototype.handleNotifications=function(i){this.notifications.container.html("");var t=[];0==i.length?(t.push($('<li>                <a href="javascript:;">                    <span class="details">Нет новых уведомлений</span>                </a>            </li>')),this.notifications.badge.text("")):(t=i.map(function(i){var t=i.link.length>0?i.link:"javascript:;",n=i.link.length>0?'target="_blank"':"",a=i.link.length>0?'<span class="pull-right label label-sm label-icon label-success"><i class="fa fa-external-link"></i> </span>':"";return $li=$('<li data-id="'+i.id+'"><a href="'+t+'" '+n+'><span class="details">'+i.text+a+"</span></a></li>"),$li.on("click",function(t){t.remove(),this.notifications.badge.text(this.notifications.badge-1),$.get("/mconsole/api/notifications/"+i.id+"/seen")}),$li}.bind(this)),this.notifications.badge.text(i.length));for(var n in t)this.notifications.container.append(t[n])},$(document).ready(function(){new Mconsole});