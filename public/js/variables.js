var Variables=function(a){this.container=a,this.add=$(".add-variable"),this.submit=$(".submit");new Clipboard(".copy-variable",{text:function(a){var i=$(a).closest(".row"),e=i.find("input").eq(0).val(),t=i.find("textarea").val(),r=t.match(/\$\w+/gi);if(!r)return"@variable('"+e+"')";var n="@variable('"+e+"', [";for(var o in r){var l=r[o];l=0==o?l.replace("$","'"):l.replace("$"," '"),n=n+l+"' => ''"}return n+="])"}});this.toggleSubmit(),this.container.on("click",".remove-variable",this.removeVariable.bind(this)),this.add.on("click",this.appendVariable.bind(this))};Variables.prototype.appendVariable=function(){var a=this.container.find(".row").length+1,i=$(".variables-template .row").clone();for(var e in i.find("input, textarea")){var t=i.find("input, textarea").eq(e);t.attr("name","variables["+a+"]["+t.data("name")+"]")}this.container.append(i),this.toggleSubmit()},Variables.prototype.removeVariable=function(a){$(a.target).closest(".row").remove()},Variables.prototype.toggleSubmit=function(){this.container.find(".row").length>0?this.submit.removeClass("hide"):this.submit.addClass("hide")},$(function(){var a=$(".variables-list");if(a.length>0){new Variables(a)}});