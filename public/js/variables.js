var Variables=function(i){this.container=i,this.add=$(".add-variable"),this.submit=$(".submit");new Clipboard(".copy-variable",{text:function(i){var a=$(i).hasClass("multiline"),e=$(i).closest(".row"),t=e.find("input").eq(0).val(),r=e.find("input").eq(1).val(),n=r.match(/\$\w+/gi);if(!n)return"@variable('"+t+"')";var l="@variable('"+t+"', [";for(var s in n){var o=n[s];o=a?o.replace("$","\r\n	'"):0==s?o.replace("$","'"):o.replace("$"," '"),l=l+o+"' => ''",(s<n.length-1||a)&&(l+=",")}return l+=a?"\r\n])":"])"}});this.toggleSubmit(),this.container.on("click",".remove-variable",this.removeVariable.bind(this)),this.add.on("click",this.appendVariable.bind(this))};Variables.prototype.appendVariable=function(){var i=this.container.find(".row").length+1,a=$(".variables-template .row").clone();for(var e in a.find("input")){var t=a.find("input").eq(e);t.attr("name","variables["+i+"]["+t.data("name")+"]")}this.container.append(a),this.toggleSubmit()},Variables.prototype.removeVariable=function(i){$(i.target).closest(".row").remove()},Variables.prototype.toggleSubmit=function(){this.container.find(".row").length>0?this.submit.removeClass("hide"):this.submit.addClass("hide")},$(function(){var i=$(".variables-list");if(i.length>0){new Variables(i)}});