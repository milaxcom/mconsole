function MenuEditor(t){this.input=t,this.config={maxDepth:99,collapseBtnHTML:"",expandBtnHTML:""},this.trans={text:$('input[name="trans-menu-editor-text"]').val(),link:$('input[name="trans-menu-editor-link"]').val(),blank:$('input[name="trans-menu-editor-blank"]').val()},this.templates={root:'<div class="dd"></div>',list:'<ol class="dd-list"></div>',item:'<li class="dd-item dd3-item"><div class="dd-handle dd3-handle"></div><div class="dd-content dd3-content"><div class="row"> <div class="col-sm-6"> <input placeholder="'+this.trans.text+'" type="text" name="text" class="form-control input-sm"> </div> <div class="col-sm-6"> <input placeholder="'+this.trans.link+'" class="form-control input-sm" type="text" name="link"> </div> </div> <label><input type="checkbox" name="blank" value="1"> '+this.trans.blank+"</label></div></li>",add:'<span class="btn btn-sm green-jungle">Add menu item</span>'},this.init()}MenuEditor.prototype.init=function(){this.root=$(this.templates.root),this.list=$(this.templates.list),this.list.appendTo(this.root),this.root.insertAfter(this.input),this.add=$(this.templates.add),this.add.on("click",this.insertItem.bind(this)),this.add.insertAfter(this.input),this.input.val().length>0&&this.fill(this.input.val()),this.root.nestable(this.config),this.root.on("change keyup click",this.serialize.bind(this)),this.root.on("change keyup click","input",this.serialize.bind(this))},MenuEditor.prototype.fill=function(t){function i(t,n){var e=$(n.item);if(e.find("input").map(function(i,n){var e=$(n).attr("name");t[e]&&("checkbox"==$(n).attr("type")?$(n).prop("checked",t[e]):$(n).val(t[e]))}),t.children){for(var s in t.children)var a=i(t.children[s],n);var l=$(n.list);a.appendTo(l),l.appendTo(e)}return e}var n=JSON.parse(t);for(var e in n){var s=i(n[e],this.templates);this.insertItem(s)}},MenuEditor.prototype.insertItem=function(t){if(t.target)var t=$(this.templates.item);t.appendTo(this.list)},MenuEditor.prototype.serialize=function(){this.root.find("input").map(function(t,i){var n=$(i).closest(".dd-item");"checkbox"==$(i).attr("type")?$(n).data($(i).attr("name"),$(i).prop("checked")):$(n).data($(i).attr("name"),$(i).val())}),this.input.val(JSON.stringify(this.root.nestable("serialize")))},$.fn.menuEditor=function(){new MenuEditor($(this))};