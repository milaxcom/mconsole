function BladeHelper(e){this.helper=e,this.animating=!1,this.classes={buttons:{toggle:".toggle-variables-helper, .helper-close",back:".variable-back",copy:".variable-copy"},containers:{item:".variable-item"}},this.selectors={list:$(this.helper.find(".list")),inputList:$(this.helper.find(".input-list")),input:$(this.helper.find(".variable-input"))},this.directives={image:"@image('{id}', [{arguments}])",variable:{withArgs:"@variable('{key}', [{arguments}])",withoutArgs:"@variable('{key}')"}},this.init()}BladeHelper.prototype.init=function(){this.helper.draggable({addClasses:!1,stop:function(e,t){$(t.helper).css({height:"auto"})}}),$(document).on("click",this.classes.buttons.toggle,this.toggle.bind(this)),$(document).on("click",this.classes.buttons.back,this.back.bind(this));var e=this;new Clipboard(e.classes.buttons.copy,{text:function(t){return notification("info",trans("variables-helper-copied"),null,{timeOut:1e3,extendedTimeOut:1e3}),e.makeDirective()}}),this.helper.find(this.classes.containers.item).on("click",this.select.bind(this))},BladeHelper.prototype.select=function(e){this.selectors.list.hide();var t=$(e.target).data("key"),i=$(e.target).data("value"),s=i.match(/\$\w+/gi);s&&(s=this.removeDollarChar(s)),this.form(t,s)},BladeHelper.prototype.toggle=function(e){this.helper.is(":visible")?this.helper.fadeOut(250):(this.helper.css("top",($(window).height()-this.helper.outerHeight())/2+"px"),this.helper.css("left",($(window).width()-this.helper.outerWidth())/2+"px"),this.helper.fadeIn(250))},BladeHelper.prototype.form=function(e,t){var i=this.selectors.input,s=this.selectors.inputList;if(t){t=t.reverse();for(var r in t){var l=$('<div class="form-group"><input class="form-control input-sm" name="'+t[r]+'" placeholder="'+t[r]+'"></div>');l.on("keyup",this.code.bind(this)),l.prependTo(s)}}e=$('<div class="form-group"><strong>'+e+"</strong></div>"),e.prependTo(s),i.show(),this.code()},BladeHelper.prototype.back=function(){this.selectors.inputList.html(""),this.selectors.input.hide(),this.helper.find(".list").show()},BladeHelper.prototype.code=function(){var e=this.makeDirective();this.helper.find(".code textarea").length>0?this.helper.find(".code textarea").text(e):this.selectors.inputList.append($('<div class="form-group code"><label>'+trans("variables-helper-code")+'</label><textarea class="form-control" readonly>'+e+"</textarea></div>"))},BladeHelper.prototype.makeDirective=function(){var e=this.helper.find(".form-group input"),t=e.length>0?this.directives.withArgs:this.directives.withoutArgs,i=this.selectors.input.find("strong").text();if(t=t.replace("{key}",i),e.length>0){var s=[];e.each(function(e,t){s.push("'"+$(t).attr("name")+"' => '"+$(t).val()+"'")}),t=t.replace("{arguments}",s.join(", "))}return t},BladeHelper.prototype.removeDollarChar=function(e){for(var t in e)e[t]=e[t].replace("$","");return e},$(function(){$(".variables-helper").length>0&&new BladeHelper($(".variables-helper"))});